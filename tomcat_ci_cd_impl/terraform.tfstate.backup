{
  "version": 4,
  "terraform_version": "0.15.5",
  "serial": 37,
  "lineage": "c4c88d76-5564-fa91-3a9e-da0d0ff7734e",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "jenkins_firewall",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-south-1:848417356303:security-group/sg-030d01de0ca00f44a",
            "description": "Managed by Terraform",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-030d01de0ca00f44a",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": null,
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": null,
                "from_port": 5000,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 5000
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": null,
                "from_port": 8080,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 8080
              }
            ],
            "name": "jenkinsSG",
            "name_prefix": "",
            "owner_id": "848417356303",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "Jenkins SG"
            },
            "tags_all": {
              "Name": "Jenkins SG"
            },
            "timeouts": null,
            "vpc_id": "vpc-9e47a0f5"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "nexusSG",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-south-1:848417356303:security-group/sg-0a941bae9684fa4fb",
            "description": "Managed by Terraform",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0a941bae9684fa4fb",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 8081,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 8081
              },
              {
                "cidr_blocks": [],
                "description": "",
                "from_port": 8081,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-030d01de0ca00f44a"
                ],
                "self": false,
                "to_port": 8081
              }
            ],
            "name": "nexusSG",
            "name_prefix": "",
            "owner_id": "848417356303",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "Nexus SG"
            },
            "tags_all": {
              "Name": "Nexus SG"
            },
            "timeouts": null,
            "vpc_id": "vpc-9e47a0f5"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "aws_security_group.jenkins_firewall"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "sonarqube_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:ap-south-1:848417356303:security-group/sg-0c938628a969d20aa",
            "description": "Managed by Terraform",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-0c938628a969d20aa",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              },
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              },
              {
                "cidr_blocks": [],
                "description": "",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-030d01de0ca00f44a"
                ],
                "self": false,
                "to_port": 80
              }
            ],
            "name": "sonarqubeSG",
            "name_prefix": "",
            "owner_id": "848417356303",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "Sonarqube SG"
            },
            "tags_all": {
              "Name": "Sonarqube SG"
            },
            "timeouts": null,
            "vpc_id": "vpc-9e47a0f5"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "aws_security_group.jenkins_firewall"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_security_group_rule",
      "name": "jenkinsToSQ",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "cidr_blocks": [],
            "description": "",
            "from_port": 80,
            "id": "sgrule-3602293500",
            "ipv6_cidr_blocks": [],
            "prefix_list_ids": [],
            "protocol": "tcp",
            "security_group_id": "sg-030d01de0ca00f44a",
            "self": false,
            "source_security_group_id": "sg-0c938628a969d20aa",
            "to_port": 80,
            "type": "ingress"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "aws_security_group.jenkins_firewall",
            "aws_security_group.sonarqube_sg"
          ]
        }
      ]
    },
    {
      "module": "module.jenkins",
      "mode": "data",
      "type": "aws_ami",
      "name": "jenkins_ami",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:ap-south-1::image/ami-0839f41b4dd59c36c",
            "block_device_mappings": [
              {
                "device_name": "/dev/xvda",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "0",
                  "snapshot_id": "snap-06785bd4fbcf12449",
                  "throughput": "0",
                  "volume_size": "8",
                  "volume_type": "gp2"
                },
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "boot_mode": "",
            "creation_date": "2022-05-02T06:01:29.000Z",
            "description": null,
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "Jenkins-*"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-0839f41b4dd59c36c",
            "image_id": "ami-0839f41b4dd59c36c",
            "image_location": "848417356303/Jenkins-1651471061",
            "image_owner_alias": null,
            "image_type": "machine",
            "kernel_id": null,
            "most_recent": true,
            "name": "Jenkins-1651471061",
            "name_regex": "^Jenkins-",
            "owner_id": "848417356303",
            "owners": [
              "self"
            ],
            "platform": null,
            "platform_details": "Linux/UNIX",
            "product_codes": [],
            "public": false,
            "ramdisk_id": null,
            "root_device_name": "/dev/xvda",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-06785bd4fbcf12449",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {},
            "usage_operation": "RunInstances",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.jenkins",
      "mode": "data",
      "type": "aws_key_pair",
      "name": "commonKey",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:ap-south-1:848417356303:key-pair/ecs",
            "filter": null,
            "fingerprint": "1a:dc:de:cf:7f:e0:b1:90:ea:34:c7:38:bf:68:20:e3:79:cd:d6:88",
            "id": "key-054d5c11fe55d1e4f",
            "key_name": "ecs",
            "key_pair_id": "key-054d5c11fe55d1e4f",
            "tags": {}
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.jenkins",
      "mode": "data",
      "type": "template_file",
      "name": "jenkins_usedata",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "4ed937fc3a4ce00449395cdd27af382a89e4f322a1edcf4a7a433244cb0a54ad",
            "rendered": "#! /bin/bash\n\nsystemctl daemon-reload\nsystemctl start jenkins\nsystemctl enable jenkins",
            "template": "#! /bin/bash\n\nsystemctl daemon-reload\nsystemctl start jenkins\nsystemctl enable jenkins",
            "vars": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.jenkins",
      "mode": "managed",
      "type": "aws_instance",
      "name": "jenkins_instance",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0839f41b4dd59c36c",
            "arn": "arn:aws:ec2:ap-south-1:848417356303:instance/i-0f71a907ada39a2cb",
            "associate_public_ip_address": true,
            "availability_zone": "ap-south-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "",
            "id": "i-0f71a907ada39a2cb",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "t2.micro",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "ecs",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": null,
            "primary_network_interface_id": "eni-0717fe207762fe820",
            "private_dns": "ip-172-31-46-253.ap-south-1.compute.internal",
            "private_ip": "172.31.46.253",
            "public_dns": "ec2-43-204-25-154.ap-south-1.compute.amazonaws.com",
            "public_ip": "43.204.25.154",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-0a9728961ece606fd",
                "volume_size": 8,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [
              "jenkinsSG"
            ],
            "source_dest_check": true,
            "subnet_id": "subnet-0ee0ec66",
            "tags": {},
            "tags_all": {},
            "tenancy": "default",
            "timeouts": null,
            "user_data": "a54f8ff0176f33d21ec32883bbe3d47384368521",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-030d01de0ca00f44a"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_security_group.jenkins_firewall",
            "module.jenkins.data.aws_ami.jenkins_ami",
            "module.jenkins.data.aws_key_pair.commonKey",
            "module.jenkins.data.template_file.jenkins_usedata"
          ]
        }
      ]
    },
    {
      "module": "module.nexus",
      "mode": "data",
      "type": "aws_ami",
      "name": "nexus_ami",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:ap-south-1::image/ami-0110313e03ebd37dd",
            "block_device_mappings": [
              {
                "device_name": "/dev/xvda",
                "ebs": {
                  "delete_on_termination": "true",
                  "encrypted": "false",
                  "iops": "0",
                  "snapshot_id": "snap-03720f28f999910ec",
                  "throughput": "0",
                  "volume_size": "8",
                  "volume_type": "gp2"
                },
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "boot_mode": "",
            "creation_date": "2022-05-02T07:11:20.000Z",
            "description": null,
            "ena_support": true,
            "executable_users": null,
            "filter": [
              {
                "name": "name",
                "values": [
                  "Nexus-*"
                ]
              }
            ],
            "hypervisor": "xen",
            "id": "ami-0110313e03ebd37dd",
            "image_id": "ami-0110313e03ebd37dd",
            "image_location": "848417356303/Nexus-1651475356",
            "image_owner_alias": null,
            "image_type": "machine",
            "kernel_id": null,
            "most_recent": true,
            "name": "Nexus-1651475356",
            "name_regex": "^Nexus-",
            "owner_id": "848417356303",
            "owners": [
              "self"
            ],
            "platform": null,
            "platform_details": "Linux/UNIX",
            "product_codes": [],
            "public": false,
            "ramdisk_id": null,
            "root_device_name": "/dev/xvda",
            "root_device_type": "ebs",
            "root_snapshot_id": "snap-03720f28f999910ec",
            "sriov_net_support": "simple",
            "state": "available",
            "state_reason": {
              "code": "UNSET",
              "message": "UNSET"
            },
            "tags": {},
            "usage_operation": "RunInstances",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.nexus",
      "mode": "data",
      "type": "aws_key_pair",
      "name": "commonKey",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:ap-south-1:848417356303:key-pair/ecs",
            "filter": null,
            "fingerprint": "1a:dc:de:cf:7f:e0:b1:90:ea:34:c7:38:bf:68:20:e3:79:cd:d6:88",
            "id": "key-054d5c11fe55d1e4f",
            "key_name": "ecs",
            "key_pair_id": "key-054d5c11fe55d1e4f",
            "tags": {}
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.nexus",
      "mode": "data",
      "type": "template_file",
      "name": "nexus_userdata",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "92dadf373fc66e99fa700e6d073961b107433597fae18ef6283bb49e1623302f",
            "rendered": "#! /bin/bash\n#!/bin/bash\nyum install java-1.8.0-openjdk.x86_64 wget -y   \nmkdir -p /opt/nexus/   \nmkdir -p /tmp/nexus/                           \ncd /tmp/nexus\nNEXUSURL=\"https://download.sonatype.com/nexus/3/latest-unix.tar.gz\"\nwget $NEXUSURL -O nexus.tar.gz\nEXTOUT=`tar xzvf nexus.tar.gz`\nNEXUSDIR=`echo $EXTOUT | cut -d '/' -f1`\nrm -rf /tmp/nexus/nexus.tar.gz\nrsync -avzh /tmp/nexus/ /opt/nexus/\nuseradd nexus\nchown -R nexus:nexus /opt/nexus \n\ncat \u003c\u003cEOT\u003e\u003e /etc/systemd/system/nexus.service\n[Unit]                                                                          \nDescription=nexus service                                                       \nAfter=network.target                                                            \n                                                                  \n[Service]                                                                       \nType=forking                                                                    \nLimitNOFILE=65536                                                               \nExecStart=/opt/nexus/$NEXUSDIR/bin/nexus start                                  \nExecStop=/opt/nexus/$NEXUSDIR/bin/nexus stop                                    \nUser=nexus                                                                      \nRestart=on-abort                                                                \n                                                                  \n[Install]                                                                       \nWantedBy=multi-user.target                                                      \nEOT\necho 'run_as_user=\"nexus\"' \u003e /opt/nexus/$NEXUSDIR/bin/nexus.rc\nsystemctl daemon-reload\nsystemctl start nexus\nsystemctl enable nexus",
            "template": "#! /bin/bash\n#!/bin/bash\nyum install java-1.8.0-openjdk.x86_64 wget -y   \nmkdir -p /opt/nexus/   \nmkdir -p /tmp/nexus/                           \ncd /tmp/nexus\nNEXUSURL=\"https://download.sonatype.com/nexus/3/latest-unix.tar.gz\"\nwget $NEXUSURL -O nexus.tar.gz\nEXTOUT=`tar xzvf nexus.tar.gz`\nNEXUSDIR=`echo $EXTOUT | cut -d '/' -f1`\nrm -rf /tmp/nexus/nexus.tar.gz\nrsync -avzh /tmp/nexus/ /opt/nexus/\nuseradd nexus\nchown -R nexus:nexus /opt/nexus \n\ncat \u003c\u003cEOT\u003e\u003e /etc/systemd/system/nexus.service\n[Unit]                                                                          \nDescription=nexus service                                                       \nAfter=network.target                                                            \n                                                                  \n[Service]                                                                       \nType=forking                                                                    \nLimitNOFILE=65536                                                               \nExecStart=/opt/nexus/$NEXUSDIR/bin/nexus start                                  \nExecStop=/opt/nexus/$NEXUSDIR/bin/nexus stop                                    \nUser=nexus                                                                      \nRestart=on-abort                                                                \n                                                                  \n[Install]                                                                       \nWantedBy=multi-user.target                                                      \nEOT\necho 'run_as_user=\"nexus\"' \u003e /opt/nexus/$NEXUSDIR/bin/nexus.rc\nsystemctl daemon-reload\nsystemctl start nexus\nsystemctl enable nexus",
            "vars": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.nexus",
      "mode": "managed",
      "type": "aws_instance",
      "name": "nexus_instance",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0c6615d1e95c98aca",
            "arn": "arn:aws:ec2:ap-south-1:848417356303:instance/i-01f2c50378e7cd480",
            "associate_public_ip_address": true,
            "availability_zone": "ap-south-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 1,
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "",
            "id": "i-01f2c50378e7cd480",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "t2.small",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "ecs",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": null,
            "primary_network_interface_id": "eni-031e8107adeb4d31d",
            "private_dns": "ip-172-31-41-21.ap-south-1.compute.internal",
            "private_ip": "172.31.41.21",
            "public_dns": "ec2-13-232-183-203.ap-south-1.compute.amazonaws.com",
            "public_ip": "13.232.183.203",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-0266f438e973b474e",
                "volume_size": 8,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [
              "nexusSG"
            ],
            "source_dest_check": true,
            "subnet_id": "subnet-0ee0ec66",
            "tags": {},
            "tags_all": {},
            "tenancy": "default",
            "timeouts": null,
            "user_data": "b67f37d143beb747ab0d554dd4bf3e70c5d39ac8",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0a941bae9684fa4fb"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_security_group.jenkins_firewall",
            "aws_security_group.nexusSG",
            "module.nexus.data.aws_key_pair.commonKey",
            "module.nexus.data.template_file.nexus_userdata"
          ]
        }
      ]
    },
    {
      "module": "module.sonarqube",
      "mode": "data",
      "type": "aws_key_pair",
      "name": "commonKey",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:ap-south-1:848417356303:key-pair/ecs",
            "filter": null,
            "fingerprint": "1a:dc:de:cf:7f:e0:b1:90:ea:34:c7:38:bf:68:20:e3:79:cd:d6:88",
            "id": "key-054d5c11fe55d1e4f",
            "key_name": "ecs",
            "key_pair_id": "key-054d5c11fe55d1e4f",
            "tags": {}
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.sonarqube",
      "mode": "data",
      "type": "template_file",
      "name": "nexus_userdata",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "15ad871ed694934c81d9761bc9c48f170d6d25ecdb8264f09b5159cec9e63c07",
            "rendered": "#!/bin/bash\ncp /etc/sysctl.conf /root/sysctl.conf_backup\ncat \u003c\u003cEOT\u003e /etc/sysctl.conf\nvm.max_map_count=262144\nfs.file-max=65536\nulimit -n 65536\nulimit -u 4096\nEOT\ncp /etc/security/limits.conf /root/sec_limit.conf_backup\ncat \u003c\u003cEOT\u003e /etc/security/limits.conf\nsonarqube   -   nofile   65536\nsonarqube   -   nproc    409\nEOT\nsudo yum update -y\nsudo yum install openjdk-11-jdk -y\n# sudo update-alternatives --config java\njava -version\nsudo yum postgresql postgresql-contrib -y\n#sudo -u postgres psql -c \"SELECT version();\"\nsudo systemctl enable postgresql.service\nsudo systemctl start  postgresql.service\nsudo echo \"postgres:admin123\" | chpasswd\nrunuser -l postgres -c \"createuser sonar\"\nsudo -i -u postgres psql -c \"ALTER USER sonar WITH ENCRYPTED PASSWORD 'admin123';\"\nsudo -i -u postgres psql -c \"CREATE DATABASE sonarqube OWNER sonar;\"\nsudo -i -u postgres psql -c \"GRANT ALL PRIVILEGES ON DATABASE sonarqube to sonar;\"\nsystemctl restart  postgresql\n#systemctl status -l   postgresql\nnetstat -tulpena | grep postgres\nsudo mkdir -p /sonarqube/\ncd /sonarqube/\nsudo curl -O https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-8.3.0.34182.zip\nsudo apt-get install zip -y\nsudo unzip -o sonarqube-8.3.0.34182.zip -d /opt/\nsudo mv /opt/sonarqube-8.3.0.34182/ /opt/sonarqube\nsudo groupadd sonar\nsudo useradd -c \"SonarQube - User\" -d /opt/sonarqube/ -g sonar sonar\nsudo chown sonar:sonar /opt/sonarqube/ -R\ncp /opt/sonarqube/conf/sonar.properties /root/sonar.properties_backup\ncat \u003c\u003cEOT\u003e /opt/sonarqube/conf/sonar.properties\nsonar.jdbc.username=sonar\nsonar.jdbc.password=admin123\nsonar.jdbc.url=jdbc:postgresql://localhost/sonarqube\nsonar.web.host=0.0.0.0\nsonar.web.port=9000\nsonar.web.javaAdditionalOpts=-server\nsonar.search.javaOpts=-Xmx512m -Xms512m -XX:+HeapDumpOnOutOfMemoryError\nsonar.log.level=INFO\nsonar.path.logs=logs\nEOT\ncat \u003c\u003cEOT\u003e /etc/systemd/system/sonarqube.service\n[Unit]\nDescription=SonarQube service\nAfter=syslog.target network.target\n[Service]\nType=forking\nExecStart=/opt/sonarqube/bin/linux-x86-64/sonar.sh start\nExecStop=/opt/sonarqube/bin/linux-x86-64/sonar.sh stop\nUser=sonar\nGroup=sonar\nRestart=always\nLimitNOFILE=65536\nLimitNPROC=4096\n[Install]\nWantedBy=multi-user.target\nEOT\nsystemctl daemon-reload\nsystemctl enable sonarqube.service\n#systemctl start sonarqube.service\n#systemctl status -l sonarqube.service\nyum install nginx -y\nrm -rf /etc/nginx/sites-enabled/default\nrm -rf /etc/nginx/sites-available/default\ncat \u003c\u003cEOT\u003e /etc/nginx/sites-available/sonarqube\nserver{\n    listen      80;\n    server_name sonarqube.groophy.in;\n    access_log  /var/log/nginx/sonar.access.log;\n    error_log   /var/log/nginx/sonar.error.log;\n    proxy_buffers 16 64k;\n    proxy_buffer_size 128k;\n    location / {\n        proxy_pass  http://127.0.0.1:9000;\n        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;\n        proxy_redirect off;\n              \n        proxy_set_header    Host            \\$host;\n        proxy_set_header    X-Real-IP       \\$remote_addr;\n        proxy_set_header    X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header    X-Forwarded-Proto http;\n    }\n}\nEOT\n\nln -s /etc/nginx/sites-available/sonarqube /etc/nginx/sites-enabled/sonarqube\nsystemctl enable nginx.service\n#systemctl restart nginx.service\nsudo ufw allow 80,9000,9001/tcp\necho \"System reboot in 30 sec\"\nsleep 30\nreboot",
            "template": "#!/bin/bash\ncp /etc/sysctl.conf /root/sysctl.conf_backup\ncat \u003c\u003cEOT\u003e /etc/sysctl.conf\nvm.max_map_count=262144\nfs.file-max=65536\nulimit -n 65536\nulimit -u 4096\nEOT\ncp /etc/security/limits.conf /root/sec_limit.conf_backup\ncat \u003c\u003cEOT\u003e /etc/security/limits.conf\nsonarqube   -   nofile   65536\nsonarqube   -   nproc    409\nEOT\nsudo yum update -y\nsudo yum install openjdk-11-jdk -y\n# sudo update-alternatives --config java\njava -version\nsudo yum postgresql postgresql-contrib -y\n#sudo -u postgres psql -c \"SELECT version();\"\nsudo systemctl enable postgresql.service\nsudo systemctl start  postgresql.service\nsudo echo \"postgres:admin123\" | chpasswd\nrunuser -l postgres -c \"createuser sonar\"\nsudo -i -u postgres psql -c \"ALTER USER sonar WITH ENCRYPTED PASSWORD 'admin123';\"\nsudo -i -u postgres psql -c \"CREATE DATABASE sonarqube OWNER sonar;\"\nsudo -i -u postgres psql -c \"GRANT ALL PRIVILEGES ON DATABASE sonarqube to sonar;\"\nsystemctl restart  postgresql\n#systemctl status -l   postgresql\nnetstat -tulpena | grep postgres\nsudo mkdir -p /sonarqube/\ncd /sonarqube/\nsudo curl -O https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-8.3.0.34182.zip\nsudo apt-get install zip -y\nsudo unzip -o sonarqube-8.3.0.34182.zip -d /opt/\nsudo mv /opt/sonarqube-8.3.0.34182/ /opt/sonarqube\nsudo groupadd sonar\nsudo useradd -c \"SonarQube - User\" -d /opt/sonarqube/ -g sonar sonar\nsudo chown sonar:sonar /opt/sonarqube/ -R\ncp /opt/sonarqube/conf/sonar.properties /root/sonar.properties_backup\ncat \u003c\u003cEOT\u003e /opt/sonarqube/conf/sonar.properties\nsonar.jdbc.username=sonar\nsonar.jdbc.password=admin123\nsonar.jdbc.url=jdbc:postgresql://localhost/sonarqube\nsonar.web.host=0.0.0.0\nsonar.web.port=9000\nsonar.web.javaAdditionalOpts=-server\nsonar.search.javaOpts=-Xmx512m -Xms512m -XX:+HeapDumpOnOutOfMemoryError\nsonar.log.level=INFO\nsonar.path.logs=logs\nEOT\ncat \u003c\u003cEOT\u003e /etc/systemd/system/sonarqube.service\n[Unit]\nDescription=SonarQube service\nAfter=syslog.target network.target\n[Service]\nType=forking\nExecStart=/opt/sonarqube/bin/linux-x86-64/sonar.sh start\nExecStop=/opt/sonarqube/bin/linux-x86-64/sonar.sh stop\nUser=sonar\nGroup=sonar\nRestart=always\nLimitNOFILE=65536\nLimitNPROC=4096\n[Install]\nWantedBy=multi-user.target\nEOT\nsystemctl daemon-reload\nsystemctl enable sonarqube.service\n#systemctl start sonarqube.service\n#systemctl status -l sonarqube.service\nyum install nginx -y\nrm -rf /etc/nginx/sites-enabled/default\nrm -rf /etc/nginx/sites-available/default\ncat \u003c\u003cEOT\u003e /etc/nginx/sites-available/sonarqube\nserver{\n    listen      80;\n    server_name sonarqube.groophy.in;\n    access_log  /var/log/nginx/sonar.access.log;\n    error_log   /var/log/nginx/sonar.error.log;\n    proxy_buffers 16 64k;\n    proxy_buffer_size 128k;\n    location / {\n        proxy_pass  http://127.0.0.1:9000;\n        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;\n        proxy_redirect off;\n              \n        proxy_set_header    Host            \\$host;\n        proxy_set_header    X-Real-IP       \\$remote_addr;\n        proxy_set_header    X-Forwarded-For \\$proxy_add_x_forwarded_for;\n        proxy_set_header    X-Forwarded-Proto http;\n    }\n}\nEOT\n\nln -s /etc/nginx/sites-available/sonarqube /etc/nginx/sites-enabled/sonarqube\nsystemctl enable nginx.service\n#systemctl restart nginx.service\nsudo ufw allow 80,9000,9001/tcp\necho \"System reboot in 30 sec\"\nsleep 30\nreboot",
            "vars": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.sonarqube",
      "mode": "managed",
      "type": "aws_instance",
      "name": "sonarqube_instance",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-0c6615d1e95c98aca",
            "arn": "arn:aws:ec2:ap-south-1:848417356303:instance/i-0abdaba48ff1049b7",
            "associate_public_ip_address": true,
            "availability_zone": "ap-south-1a",
            "capacity_reservation_specification": [
              {
                "capacity_reservation_preference": "open",
                "capacity_reservation_target": []
              }
            ],
            "cpu_core_count": 2,
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "",
            "id": "i-0abdaba48ff1049b7",
            "instance_initiated_shutdown_behavior": "stop",
            "instance_state": "running",
            "instance_type": "t2.medium",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "ecs",
            "launch_template": [],
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "placement_partition_number": null,
            "primary_network_interface_id": "eni-09c7d7e8abd303c41",
            "private_dns": "ip-172-31-32-222.ap-south-1.compute.internal",
            "private_ip": "172.31.32.222",
            "public_dns": "ec2-13-234-37-243.ap-south-1.compute.amazonaws.com",
            "public_ip": "13.234.37.243",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 100,
                "kms_key_id": "",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-024fdf0a533407a26",
                "volume_size": 8,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [
              "sonarqubeSG"
            ],
            "source_dest_check": true,
            "subnet_id": "subnet-0ee0ec66",
            "tags": {},
            "tags_all": {},
            "tenancy": "default",
            "timeouts": null,
            "user_data": "91e48e011c1a01c4ff2e3880dd0a780503ba3934",
            "user_data_base64": null,
            "user_data_replace_on_change": false,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-0c938628a969d20aa"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_security_group.sonarqube_sg",
            "module.sonarqube.data.aws_key_pair.commonKey",
            "module.sonarqube.data.template_file.nexus_userdata"
          ]
        }
      ]
    }
  ]
}
